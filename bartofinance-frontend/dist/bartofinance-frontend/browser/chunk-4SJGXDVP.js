import{a as B}from"./chunk-KACANUM6.js";import"./chunk-P3XFKQUJ.js";import{b as T,c as d,d as R,e as k,g as N,i as M,j as w,q,s as D}from"./chunk-FV3EXO43.js";import{a as F}from"./chunk-RJRCW5OO.js";import{$ as m,A as _,Ja as S,N as r,O as c,Sa as E,Ta as y,U as C,W as u,Wa as j,Y as f,_ as g,ea as a,fa as n,ga as p,ia as b,ja as h,na as o,wa as x}from"./chunk-CFGVTO76.js";function G(t,s){t&1&&o(0," Nome \xE9 obrigat\xF3rio ")}function I(t,s){t&1&&o(0," Nome deve ter no m\xEDnimo 3 caracteres ")}function L(t,s){if(t&1&&(a(0,"p",11),u(1,G,1,0)(2,I,1,0),n()),t&2){let i=h();r(),m(1,!(i.nome==null||i.nome.errors==null)&&i.nome.errors.required?1:-1),r(),m(2,!(i.nome==null||i.nome.errors==null)&&i.nome.errors.minlength?2:-1)}}function A(t,s){t&1&&o(0," Email \xE9 obrigat\xF3rio ")}function P(t,s){t&1&&o(0," Email inv\xE1lido ")}function V(t,s){if(t&1&&(a(0,"p",11),u(1,A,1,0)(2,P,1,0),n()),t&2){let i=h();r(),m(1,!(i.email==null||i.email.errors==null)&&i.email.errors.required?1:-1),r(),m(2,!(i.email==null||i.email.errors==null)&&i.email.errors.email?2:-1)}}function O(t,s){t&1&&o(0," Senha \xE9 obrigat\xF3ria ")}function J(t,s){t&1&&o(0," Senha deve ter no m\xEDnimo 6 caracteres ")}function z(t,s){if(t&1&&(a(0,"p",11),u(1,O,1,0)(2,J,1,0),n()),t&2){let i=h();r(),m(1,!(i.senha==null||i.senha.errors==null)&&i.senha.errors.required?1:-1),r(),m(2,!(i.senha==null||i.senha.errors==null)&&i.senha.errors.minlength?2:-1)}}function H(t,s){t&1&&(a(0,"span",21),o(1,"\u23F3"),n(),o(2," Criando conta... "))}function K(t,s){t&1&&o(0," Criar Conta ")}var oe=(()=>{class t{constructor(i,l,e,v){this.fb=i,this.authService=l,this.toastService=e,this.router=v,this.loading=C(!1),this.registerForm=this.fb.group({nome:["",[d.required,d.minLength(3)]],email:["",[d.required,d.email]],senha:["",[d.required,d.minLength(6)]]})}onSubmit(){this.registerForm.valid?(this.loading.set(!0),this.authService.register(this.registerForm.value).subscribe({next:i=>{console.log("Register component - success, navigating to dashboard"),this.toastService.success("Conta criada com sucesso! Bem-vindo ao BartoFinance! \u{1F389}"),this.loading.set(!1),setTimeout(()=>{this.router.navigate(["/dashboard"]).then(l=>{console.log("Navigation result:",l),l||(console.error("Navigation failed! Trying again..."),setTimeout(()=>{this.router.navigate(["/dashboard"])},100))})},100)},error:i=>{console.error("Register error:",i),this.loading.set(!1);let l=i.error?.mensagem||"Erro ao criar conta. Tente novamente.";this.toastService.error(l)}})):this.toastService.warning("Por favor, preencha todos os campos corretamente.")}get nome(){return this.registerForm.get("nome")}get email(){return this.registerForm.get("email")}get senha(){return this.registerForm.get("senha")}static{this.\u0275fac=function(l){return new(l||t)(c(q),c(j),c(F),c(E))}}static{this.\u0275cmp=_({type:t,selectors:[["app-register"]],standalone:!0,features:[x],decls:34,vars:12,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-primary-50","to-gray-100","dark:from-slate-950","dark:to-slate-900","p-4"],[1,"absolute","top-4","right-4"],[1,"w-full","max-w-md"],[1,"text-center","animate-fade-in","mb-6"],["src","assets/logo.png","alt","BartoFinance",1,"w-auto","mx-auto"],[1,"card","animate-slide-up"],[1,"text-2xl","font-bold","text-center","mb-6","text-gray-900","dark:text-gray-100"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","nome",1,"label"],["id","nome","type","text","formControlName","nome","placeholder","Seu nome completo"],[1,"text-red-600","text-sm","mt-1"],["for","email",1,"label"],["id","email","type","email","formControlName","email","placeholder","seu@email.com"],[1,"mb-6"],["for","senha",1,"label"],["id","senha","type","password","formControlName","senha","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["type","submit",1,"btn-primary","w-full",3,"disabled"],[1,"mt-6","text-center","text-sm","text-gray-600","dark:text-gray-400"],["routerLink","/login",1,"text-primary-600","hover:text-primary-700","dark:text-primary-400","dark:hover:text-primary-300","font-medium","ml-1"],[1,"text-center","text-sm","text-gray-500","dark:text-gray-400","mt-8"],[1,"inline-block","animate-spin","mr-2"]],template:function(l,e){l&1&&(a(0,"div",0)(1,"div",1),p(2,"app-theme-toggle"),n(),a(3,"div",2)(4,"div",3),p(5,"img",4),n(),a(6,"div",5)(7,"h2",6),o(8,"Criar Conta"),n(),a(9,"form",7),b("ngSubmit",function(){return e.onSubmit()}),a(10,"div",8)(11,"label",9),o(12,"Nome Completo"),n(),p(13,"input",10),u(14,L,3,2,"p",11),n(),a(15,"div",8)(16,"label",12),o(17,"Email"),n(),p(18,"input",13),u(19,V,3,2,"p",11),n(),a(20,"div",14)(21,"label",15),o(22,"Senha"),n(),p(23,"input",16),u(24,z,3,2,"p",11),n(),a(25,"button",17),u(26,H,3,0)(27,K,1,0),n()(),a(28,"div",18),o(29," J\xE1 tem uma conta? "),a(30,"a",19),o(31," Fa\xE7a login "),n()()(),a(32,"p",20),o(33," \xA9 2025 Todos os direitos reservados. "),n()()()),l&2&&(r(9),f("formGroup",e.registerForm),r(4),g(e.nome!=null&&e.nome.invalid&&(e.nome!=null&&e.nome.touched)?"input input-error":"input"),r(),m(14,e.nome!=null&&e.nome.invalid&&(e.nome!=null&&e.nome.touched)?14:-1),r(4),g(e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?"input input-error":"input"),r(),m(19,e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?19:-1),r(4),g(e.senha!=null&&e.senha.invalid&&(e.senha!=null&&e.senha.touched)?"input input-error":"input"),r(),m(24,e.senha!=null&&e.senha.invalid&&(e.senha!=null&&e.senha.touched)?24:-1),r(),f("disabled",e.loading()||e.registerForm.invalid),r(),m(26,e.loading()?26:27))},dependencies:[S,D,N,T,R,k,M,w,y,B],styles:["[_nghost-%COMP%]{display:block}.card[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}"]})}}return t})();export{oe as RegisterComponent};
