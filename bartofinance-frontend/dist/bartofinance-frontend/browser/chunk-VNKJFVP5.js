import{a as G}from"./chunk-KACANUM6.js";import"./chunk-P3XFKQUJ.js";import{b as L,c,d as T,e as k,g as N,i as M,j as w,q as j,s as q}from"./chunk-FV3EXO43.js";import{a as F}from"./chunk-RJRCW5OO.js";import{$ as m,A as _,Ja as S,N as r,O as u,Sa as y,Ta as E,U as b,W as d,Wa as D,Y as g,_ as h,ea as n,fa as o,ga as p,ia as C,ja as f,na as a,wa as x}from"./chunk-CFGVTO76.js";function I(t,s){t&1&&a(0," Email \xE9 obrigat\xF3rio ")}function P(t,s){t&1&&a(0," Email inv\xE1lido ")}function V(t,s){if(t&1&&(n(0,"p",11),d(1,I,1,0)(2,P,1,0),o()),t&2){let i=f();r(),m(1,!(i.email==null||i.email.errors==null)&&i.email.errors.required?1:-1),r(),m(2,!(i.email==null||i.email.errors==null)&&i.email.errors.email?2:-1)}}function A(t,s){t&1&&a(0," Senha \xE9 obrigat\xF3ria ")}function R(t,s){t&1&&a(0," Senha deve ter no m\xEDnimo 6 caracteres ")}function B(t,s){if(t&1&&(n(0,"p",11),d(1,A,1,0)(2,R,1,0),o()),t&2){let i=f();r(),m(1,!(i.senha==null||i.senha.errors==null)&&i.senha.errors.required?1:-1),r(),m(2,!(i.senha==null||i.senha.errors==null)&&i.senha.errors.minlength?2:-1)}}function O(t,s){t&1&&(n(0,"span",19),a(1,"\u23F3"),o(),a(2," Entrando... "))}function z(t,s){t&1&&a(0," Entrar ")}var te=(()=>{class t{constructor(i,l,e,v){this.fb=i,this.authService=l,this.toastService=e,this.router=v,this.loading=b(!1),this.loginForm=this.fb.group({email:["",[c.required,c.email]],senha:["",[c.required,c.minLength(6)]]})}onSubmit(){this.loginForm.valid?(this.loading.set(!0),this.authService.login(this.loginForm.value).subscribe({next:i=>{console.log("Login component - success, navigating to dashboard"),this.toastService.success("Login realizado com sucesso! \u{1F389}"),this.loading.set(!1),setTimeout(()=>{this.router.navigate(["/dashboard"]).then(l=>{console.log("Navigation result:",l),l||(console.error("Navigation failed! Trying again..."),setTimeout(()=>{this.router.navigate(["/dashboard"])},100))})},100)},error:i=>{console.error("Login error:",i),this.loading.set(!1);let l=i.error?.mensagem||"Credenciais inv\xE1lidas. Verifique seu email e senha.";this.toastService.error(l)}})):this.toastService.warning("Por favor, preencha todos os campos corretamente.")}get email(){return this.loginForm.get("email")}get senha(){return this.loginForm.get("senha")}static{this.\u0275fac=function(l){return new(l||t)(u(j),u(D),u(F),u(y))}}static{this.\u0275cmp=_({type:t,selectors:[["app-login"]],standalone:!0,features:[x],decls:29,vars:9,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-primary-50","to-gray-100","dark:from-slate-950","dark:to-slate-900","p-4"],[1,"absolute","top-4","right-4"],[1,"w-full","max-w-md"],[1,"text-center","animate-fade-in","mb-6"],["src","assets/logo.png","alt","BartoFinance",1,"w-auto","mx-auto"],[1,"card","animate-slide-up"],[1,"text-2xl","font-bold","text-center","mb-6","text-gray-900","dark:text-gray-100"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"label"],["id","email","type","email","formControlName","email","placeholder","seu@email.com"],[1,"text-red-600","text-sm","mt-1"],[1,"mb-6"],["for","senha",1,"label"],["id","senha","type","password","formControlName","senha","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["type","submit",1,"btn-primary","w-full",3,"disabled"],[1,"mt-6","text-center","text-sm","text-gray-600","dark:text-gray-400"],["routerLink","/register",1,"text-primary-600","hover:text-primary-700","dark:text-primary-400","dark:hover:text-primary-300","font-medium","ml-1"],[1,"text-center","text-sm","text-gray-500","dark:text-gray-400","mt-8"],[1,"inline-block","animate-spin","mr-2"]],template:function(l,e){l&1&&(n(0,"div",0)(1,"div",1),p(2,"app-theme-toggle"),o(),n(3,"div",2)(4,"div",3),p(5,"img",4),o(),n(6,"div",5)(7,"h2",6),a(8,"Entrar na Plataforma"),o(),n(9,"form",7),C("ngSubmit",function(){return e.onSubmit()}),n(10,"div",8)(11,"label",9),a(12,"Email"),o(),p(13,"input",10),d(14,V,3,2,"p",11),o(),n(15,"div",12)(16,"label",13),a(17,"Senha"),o(),p(18,"input",14),d(19,B,3,2,"p",11),o(),n(20,"button",15),d(21,O,3,0)(22,z,1,0),o()(),n(23,"div",16),a(24," N\xE3o tem uma conta? "),n(25,"a",17),a(26," Cadastre-se "),o()()(),n(27,"p",18),a(28," \xA9 2025 Todos os direitos reservados. "),o()()()),l&2&&(r(9),g("formGroup",e.loginForm),r(4),h(e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?"input input-error":"input"),r(),m(14,e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?14:-1),r(4),h(e.senha!=null&&e.senha.invalid&&(e.senha!=null&&e.senha.touched)?"input input-error":"input"),r(),m(19,e.senha!=null&&e.senha.invalid&&(e.senha!=null&&e.senha.touched)?19:-1),r(),g("disabled",e.loading()||e.loginForm.invalid),r(),m(21,e.loading()?21:22))},dependencies:[S,q,N,L,T,k,M,w,E,G],styles:["[_nghost-%COMP%]{display:block}.card[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}"]})}}return t})();export{te as LoginComponent};
