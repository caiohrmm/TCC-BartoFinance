import{b as L,c,d as T,e as N,g as M,i as w,j as k,q as j,s as q}from"./chunk-S2EJ55TC.js";import{a as F}from"./chunk-SEIL6NAD.js";import{D as l,E as d,Ga as E,Ha as y,K as b,Ka as D,M as u,O as g,Q as h,R as m,V as o,W as a,X as p,Z as C,_ as f,ca as n,la as S,r as _,xa as x}from"./chunk-FEKYFKK3.js";function G(i,s){i&1&&n(0," Email \xE9 obrigat\xF3rio ")}function I(i,s){i&1&&n(0," Email inv\xE1lido ")}function P(i,s){if(i&1&&(o(0,"p",10),u(1,G,1,0)(2,I,1,0),a()),i&2){let t=f();l(),m(1,!(t.email==null||t.email.errors==null)&&t.email.errors.required?1:-1),l(),m(2,!(t.email==null||t.email.errors==null)&&t.email.errors.email?2:-1)}}function V(i,s){i&1&&n(0," Senha \xE9 obrigat\xF3ria ")}function A(i,s){i&1&&n(0," Senha deve ter no m\xEDnimo 6 caracteres ")}function R(i,s){if(i&1&&(o(0,"p",10),u(1,V,1,0)(2,A,1,0),a()),i&2){let t=f();l(),m(1,!(t.senha==null||t.senha.errors==null)&&t.senha.errors.required?1:-1),l(),m(2,!(t.senha==null||t.senha.errors==null)&&t.senha.errors.minlength?2:-1)}}function B(i,s){i&1&&(o(0,"span",18),n(1,"\u23F3"),a(),n(2," Entrando... "))}function O(i,s){i&1&&n(0," Entrar ")}var $=(()=>{class i{constructor(t,r,e,v){this.fb=t,this.authService=r,this.toastService=e,this.router=v,this.loading=b(!1),this.loginForm=this.fb.group({email:["",[c.required,c.email]],senha:["",[c.required,c.minLength(6)]]})}onSubmit(){this.loginForm.valid?(this.loading.set(!0),this.authService.login(this.loginForm.value).subscribe({next:t=>{console.log("Login component - success, navigating to dashboard"),this.toastService.success("Login realizado com sucesso! \u{1F389}"),this.loading.set(!1),setTimeout(()=>{this.router.navigate(["/dashboard"]).then(r=>{console.log("Navigation result:",r),r||(console.error("Navigation failed! Trying again..."),setTimeout(()=>{this.router.navigate(["/dashboard"])},100))})},100)},error:t=>{console.error("Login error:",t),this.loading.set(!1);let r=t.error?.mensagem||"Credenciais inv\xE1lidas. Verifique seu email e senha.";this.toastService.error(r)}})):this.toastService.warning("Por favor, preencha todos os campos corretamente.")}get email(){return this.loginForm.get("email")}get senha(){return this.loginForm.get("senha")}static{this.\u0275fac=function(r){return new(r||i)(d(j),d(D),d(F),d(E))}}static{this.\u0275cmp=_({type:i,selectors:[["app-login"]],standalone:!0,features:[S],decls:27,vars:9,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-primary-50","to-gray-100","p-4"],[1,"w-full","max-w-md"],[1,"text-center","animate-fade-in","mb-6"],["src","assets/logo.png","alt","BartoFinance",1,"w-auto","mx-auto"],[1,"card","animate-slide-up"],[1,"text-2xl","font-bold","text-center","mb-6"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"label"],["id","email","type","email","formControlName","email","placeholder","seu@email.com"],[1,"text-red-600","text-sm","mt-1"],[1,"mb-6"],["for","senha",1,"label"],["id","senha","type","password","formControlName","senha","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["type","submit",1,"btn-primary","w-full",3,"disabled"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/register",1,"text-primary-600","hover:text-primary-700","font-medium","ml-1"],[1,"text-center","text-sm","text-gray-500","mt-8"],[1,"inline-block","animate-spin","mr-2"]],template:function(r,e){r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),p(3,"img",3),a(),o(4,"div",4)(5,"h2",5),n(6,"Entrar na Plataforma"),a(),o(7,"form",6),C("ngSubmit",function(){return e.onSubmit()}),o(8,"div",7)(9,"label",8),n(10,"Email"),a(),p(11,"input",9),u(12,P,3,2,"p",10),a(),o(13,"div",11)(14,"label",12),n(15,"Senha"),a(),p(16,"input",13),u(17,R,3,2,"p",10),a(),o(18,"button",14),u(19,B,3,0)(20,O,1,0),a()(),o(21,"div",15),n(22," N\xE3o tem uma conta? "),o(23,"a",16),n(24," Cadastre-se "),a()()(),o(25,"p",17),n(26," \xA9 2025 Todos os direitos reservados. "),a()()()),r&2&&(l(7),g("formGroup",e.loginForm),l(4),h(e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?"input input-error":"input"),l(),m(12,e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?12:-1),l(4),h(e.senha!=null&&e.senha.invalid&&(e.senha!=null&&e.senha.touched)?"input input-error":"input"),l(),m(17,e.senha!=null&&e.senha.invalid&&(e.senha!=null&&e.senha.touched)?17:-1),l(),g("disabled",e.loading()||e.loginForm.invalid),l(),m(19,e.loading()?19:20))},dependencies:[x,q,M,L,T,N,w,k,y],styles:["[_nghost-%COMP%]{display:block}.card[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}"]})}}return i})();export{$ as LoginComponent};
