import{a as z}from"./chunk-ARM6HCHL.js";import{a as N}from"./chunk-OULKYF5Q.js";import{a as U,b as q}from"./chunk-JRTYZLGQ.js";import{a as B}from"./chunk-QGIMMVU2.js";import{a as V}from"./chunk-HSZE64OI.js";import{a as $,b as R,c as O}from"./chunk-7YW65ONQ.js";import{$ as h,A as o,Aa as P,B as v,Da as j,H as u,J as _,L as y,N as f,O as c,Q as I,R as D,S as i,T as e,U as C,V as w,W as g,X as p,Y as n,Z as x,_ as m,fa as A,ga as M,o as T,qa as L,s as E,t as S,xa as k,za as F}from"./chunk-EECCVOVP.js";var G=(a,d)=>d.id,K=a=>["/carteiras",a];function Q(a,d){a&1&&(i(0,"div",15),C(1,"span",17),i(2,"p",18),n(3,"Carregando perfil..."),e()())}function W(a,d){if(a&1&&(i(0,"span"),n(1),e()),a&2){let t=d;f("badge bg-"+t.color+"-100 text-"+t.color+"-800 text-lg"),o(),h(" ",t.icon," ",t.label," ")}}function X(a,d){if(a&1&&(i(0,"div",32)(1,"p",47)(2,"span",12),n(3,"Objetivos:"),e(),n(4),e()()),a&2){let t=p();o(4),m(" ",t.objetivos," ")}}function Y(a,d){a&1&&(i(0,"div",46)(1,"div",48)(2,"p",49),n(3,"\u{1F4BC}"),e(),i(4,"p",50),n(5,"Nenhuma carteira vinculada."),e(),i(6,"p",51),n(7,"Crie uma carteira personalizada para este investidor."),e(),i(8,"a",52),n(9," Criar Carteira "),e()()())}function Z(a,d){if(a&1&&(i(0,"span",58),n(1),e()),a&2){let t=d;o(),h(" ",t.icon," ",t.label," ")}}function tt(a,d){if(a&1&&(i(0,"span"),n(1),e()),a&2){let t=d;f("badge bg-"+t.color+"-100 text-"+t.color+"-800"),o(),h(" ",t.icon," ",t.label," ")}}function et(a,d){a&1&&(i(0,"p",69),n(1," Nenhuma aplica\xE7\xE3o registrada nesta carteira. "),e())}function it(a,d){if(a&1&&(i(0,"tr",75)(1,"td",76),n(2),e(),i(3,"td",77),n(4),e(),i(5,"td",78),n(6),e(),i(7,"td",79)(8,"span"),n(9),e()(),i(10,"td",79)(11,"span"),n(12),e()()()),a&2){let t=d.$implicit,l=p(8);o(2),m(" ",t.codigoAtivo," "),o(2),m(" ",t.tipoProduto," "),o(2),m(" ",l.formatarValor(t.valorAplicado)," "),o(2),f(t.rentabilidadeAtual>=0?"text-green-600 font-medium":"text-red-600 font-medium"),o(),m(" ",l.formatarPercentual(t.rentabilidadeAtual)," "),o(2),f(t.status==="ATIVA"?"badge bg-green-100 text-green-800":"badge bg-gray-100 text-gray-800"),o(),m(" ",t.status," ")}}function nt(a,d){if(a&1&&(i(0,"div",70)(1,"table",71)(2,"thead",72)(3,"tr")(4,"th",73),n(5,"Ativo"),e(),i(6,"th",73),n(7,"Tipo"),e(),i(8,"th",73),n(9,"Valor"),e(),i(10,"th",73),n(11,"Rentabilidade"),e(),i(12,"th",73),n(13,"Status"),e()()(),i(14,"tbody",74),I(15,it,13,9,"tr",75,G),e()()()),a&2){let t=p();o(15),D(t)}}function at(a,d){a&1&&_(0,et,2,0,"p",69)(1,nt,17,0),a&2&&c(0,d.length===0?0:1)}function rt(a,d){if(a&1&&(i(0,"div",67)(1,"h5",68),n(2,"Aplica\xE7\xF5es desta Carteira"),e(),_(3,at,2,1),e()),a&2){let t,l=p().$implicit,r=p(4);o(3),c(3,(t=r.getAplicacoesDaCarteira(l.id))?3:-1,t)}}function ot(a,d){if(a&1){let t=w();i(0,"div",54)(1,"div",55),g("click",function(){let r=E(t).$implicit,s=p(4);return S(s.toggleCarteira(r.id))}),i(2,"div",27)(3,"div",56)(4,"h4",57),n(5),e(),_(6,Z,2,2,"span",58)(7,tt,2,4,"span",30),e(),i(8,"div",59)(9,"div")(10,"span",60),n(11,"Valor Total:"),e(),i(12,"span",61),n(13),e()(),i(14,"div")(15,"span",60),n(16,"Rentabilidade:"),e(),i(17,"span"),n(18),e()(),i(19,"div")(20,"span",60),n(21,"Meta:"),e(),i(22,"span",62),n(23),e()(),i(24,"div")(25,"span",60),n(26,"Criada em:"),e(),i(27,"span",63),n(28),e()()()(),i(29,"div",64)(30,"a",65),g("click",function(r){return E(t),S(r.stopPropagation())}),n(31," Ver Detalhes "),e(),i(32,"button",66),n(33),e()()(),_(34,rt,4,1,"div",67),e()}if(a&2){let t,l,r=d.$implicit,s=p(4);o(5),x(r.nome),o(),c(6,(t=s.getTipoInfo(r.tipo))?6:-1,t),o(),c(7,(l=s.getRiscoInfo(r.risco))?7:-1,l),o(6),x(s.formatarValor(r.valorTotal)),o(4),f(r.rentabilidadeAtual>=0?"ml-2 font-semibold text-green-600":"ml-2 font-semibold text-red-600"),o(),m(" ",s.formatarPercentual(r.rentabilidadeAtual)," "),o(5),x(s.formatarPercentual(r.metaRentabilidade)),o(5),x(s.formatarData(r.createdAt)),o(2),y("routerLink",M(12,K,r.id)),o(3),m(" ",s.carteiraExpandida()===r.id?"\u25BC":"\u25B6"," "),o(),c(34,s.carteiraExpandida()===r.id?34:-1)}}function lt(a,d){if(a&1&&(i(0,"div",53),I(1,ot,35,14,"div",54,G),e()),a&2){let t=p(3);o(),D(t.carteiras())}}function dt(a,d){if(a&1&&(i(0,"div",19)(1,"a",20),n(2,"Investidores"),e(),i(3,"span",21),n(4,"\u203A"),e(),i(5,"span",22),n(6),e()(),i(7,"div",23)(8,"div",24)(9,"div",25)(10,"div",26),n(11),e(),i(12,"div",27)(13,"div",28)(14,"h2",29),n(15),e(),_(16,W,2,4,"span",30),e(),i(17,"div",31)(18,"div")(19,"span",12),n(20,"CPF:"),e(),n(21),e(),i(22,"div")(23,"span",12),n(24,"Email:"),e(),n(25),e(),i(26,"div")(27,"span",12),n(28,"Telefone:"),e(),n(29),e(),i(30,"div")(31,"span",12),n(32,"Cliente desde:"),e(),n(33),e()(),_(34,X,5,1,"div",32),e()(),i(35,"button",33),n(36," \u2190 Voltar "),e()()(),i(37,"div",34)(38,"div",35)(39,"p",36),n(40,"Patrim\xF4nio Declarado"),e(),i(41,"p",37),n(42),e()(),i(43,"div",38)(44,"p",36),n(45,"Renda Mensal"),e(),i(46,"p",39),n(47),e()(),i(48,"div",40)(49,"p",36),n(50,"Valor em Carteiras"),e(),i(51,"p",41),n(52),e()(),i(53,"div",42)(54,"p",36),n(55,"Rentabilidade M\xE9dia"),e(),i(56,"p"),n(57),e()()(),i(58,"div",43)(59,"div",44)(60,"h3",37),n(61),e(),i(62,"a",45),n(63," + Criar Nova Carteira "),e()(),_(64,Y,10,0,"div",46)(65,lt,3,0),e()),a&2){let t,l=d,r=p(2);o(6),x(l.nome),o(5),m(" ",l.nome.charAt(0).toUpperCase()," "),o(4),x(l.nome),o(),c(16,(t=r.getPerfilInfo())?16:-1,t),o(5),m(" ",r.formatarCpf(l.cpf)," "),o(4),m(" ",l.email," "),o(4),m(" ",r.formatarTelefone(l.telefone)," "),o(4),m(" ",r.formatarData(l.createdAt)," "),o(),c(34,l.objetivos?34:-1),o(8),x(r.formatarValor(l.patrimonioAtual)),o(5),x(r.formatarValor(l.rendaMensal)),o(5),x(r.formatarValor(r.totalEmCarteiras)),o(4),f(r.rentabilidadeMedia>=0?"text-2xl font-bold text-green-600":"text-2xl font-bold text-red-600"),o(),m(" ",r.formatarPercentual(r.rentabilidadeMedia)," "),o(4),m(" Carteiras (",r.carteirasAtivas,") "),o(3),c(64,r.carteiras().length===0?64:65)}}function st(a,d){if(a&1&&_(0,dt,66,17),a&2){let t,l=p();c(0,(t=l.investidor())?0:-1,t)}}var It=(()=>{class a{constructor(t,l,r,s,b,H,J){this.route=t,this.router=l,this.investidorService=r,this.portfolioService=s,this.aplicacaoService=b,this.toastService=H,this.authService=J,this.investidor=u(null),this.carteiras=u([]),this.aplicacoesPorCarteira=u(new Map),this.carteiraExpandida=u(null),this.loading=u(!1),this.showLogoutModal=u(!1),this.userName=u(""),this.investidorId="",this.perfilOptions=z,this.riscoOptions=q,this.tipoOptions=U}ngOnInit(){let t=this.authService.currentUser();t&&this.userName.set(t.nome),this.investidorId=this.route.snapshot.paramMap.get("id"),this.investidorId&&(this.carregarInvestidor(),this.carregarCarteiras())}carregarInvestidor(){this.loading.set(!0),this.investidorService.buscarPorId(this.investidorId).subscribe({next:t=>{this.investidor.set(t.data),this.loading.set(!1)},error:t=>{this.loading.set(!1),this.toastService.error(t.error?.mensagem||"Erro ao carregar investidor"),this.router.navigate(["/investidores"])}})}carregarCarteiras(){this.portfolioService.listarPortfolios().subscribe({next:t=>{let l=t.data.filter(r=>r.investidorId===this.investidorId);this.carteiras.set(l)},error:t=>{this.toastService.error(t.error?.mensagem||"Erro ao carregar carteiras")}})}toggleCarteira(t){this.carteiraExpandida()===t?this.carteiraExpandida.set(null):(this.carteiraExpandida.set(t),this.carregarAplicacoesDaCarteira(t))}carregarAplicacoesDaCarteira(t){this.aplicacoesPorCarteira().has(t)||this.aplicacaoService.listarAplicacoes().subscribe({next:l=>{let r=l.data.filter(b=>b.portfolioId===t),s=new Map(this.aplicacoesPorCarteira());s.set(t,r),this.aplicacoesPorCarteira.set(s)},error:()=>{}})}getAplicacoesDaCarteira(t){return this.aplicacoesPorCarteira().get(t)||[]}abrirModalLogout(){this.showLogoutModal.set(!0)}confirmarLogout(){this.showLogoutModal.set(!1),this.authService.logout()}cancelarLogout(){this.showLogoutModal.set(!1)}getPerfilInfo(){let t=this.investidor();return t?this.perfilOptions.find(l=>l.value===t.perfilInvestidor):null}getRiscoInfo(t){return this.riscoOptions.find(l=>l.value===t)}getTipoInfo(t){return this.tipoOptions.find(l=>l.value===t)}formatarCpf(t){return t.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}formatarTelefone(t){return t.length===11?t.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):t.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3")}formatarValor(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}formatarPercentual(t){return`${t>=0?"+":""}${t.toFixed(2)}%`}formatarData(t){return new Date(t).toLocaleDateString("pt-BR")}get totalEmCarteiras(){return this.carteiras().reduce((t,l)=>t+l.valorTotal,0)}get rentabilidadeMedia(){let t=this.carteiras();return t.length===0?0:t.reduce((r,s)=>r+s.rentabilidadeAtual,0)/t.length}get carteirasAtivas(){return this.carteiras().length}static{this.\u0275fac=function(l){return new(l||a)(v(k),v(F),v(O),v(B),v(N),v(V),v(j))}}static{this.\u0275cmp=T({type:a,selectors:[["app-investidor-detail"]],standalone:!0,features:[A],decls:25,vars:9,consts:[[1,"min-h-screen","bg-gray-50","flex","flex-col"],[1,"bg-white","shadow-sm","border-b","border-gray-200"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","h-20"],[1,"flex","items-center"],["src","assets/logo.png","alt","BartoFinance","routerLink","/dashboard",1,"h-16","w-auto","hover:opacity-80","transition-opacity","cursor-pointer"],[1,"hidden","md:flex","items-center","space-x-8"],["routerLink","/dashboard",1,"text-gray-600","hover:text-primary-600","transition"],["routerLink","/investidores",1,"text-gray-900","hover:text-primary-600","font-medium","transition"],["routerLink","/carteiras",1,"text-gray-600","hover:text-primary-600","transition"],[1,"flex","items-center","space-x-4"],[1,"text-sm","text-gray-700"],[1,"font-semibold"],[1,"btn-ghost","text-sm",3,"click"],[1,"flex-1","max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8","w-full"],[1,"flex","justify-center","items-center","py-12"],[3,"confirm","cancel","show","title","message","confirmText","cancelText","type","icon"],[1,"animate-spin","rounded-full","h-12","w-12","border-4","border-primary-500","border-t-transparent"],[1,"ml-4","text-primary-600"],[1,"mb-6","flex","items-center","text-sm","text-gray-600","animate-fade-in"],["routerLink","/investidores",1,"hover:text-primary-600"],[1,"mx-2"],[1,"text-gray-900","font-medium"],[1,"card","mb-6","animate-slide-up"],[1,"flex","justify-between","items-start"],[1,"flex","items-start","gap-6","flex-1"],[1,"flex-shrink-0","h-24","w-24","rounded-full","bg-gradient-to-br","from-primary-400","to-primary-600","flex","items-center","justify-center","text-white","text-4xl","font-bold","shadow-lg"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-3"],[1,"text-3xl","font-bold","text-gray-900"],[3,"class"],[1,"grid","grid-cols-2","gap-x-6","gap-y-2","text-sm","text-gray-700"],[1,"mt-4","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],["routerLink","/investidores",1,"btn-ghost"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-6","mb-8"],[1,"card","animate-slide-up","animation-delay-200"],[1,"text-sm","font-medium","text-gray-600","mb-1"],[1,"text-2xl","font-bold","text-gray-900"],[1,"card","animate-slide-up","animation-delay-300"],[1,"text-2xl","font-bold","text-green-600"],[1,"card","animate-slide-up","animation-delay-400"],[1,"text-2xl","font-bold","text-primary-600"],[1,"card","animate-slide-up","animation-delay-500"],[1,"mb-6"],[1,"flex","justify-between","items-center","mb-4"],["routerLink","/carteiras",1,"btn-secondary","text-sm"],[1,"card"],[1,"text-sm","text-blue-800"],[1,"text-center","py-8","text-gray-500"],[1,"text-4xl","mb-4"],[1,"text-lg","font-medium"],[1,"text-sm","mt-2"],["routerLink","/carteiras",1,"btn-primary","mt-6"],[1,"space-y-4"],[1,"card","border-l-4","border-primary-500","hover:shadow-lg","transition-shadow"],[1,"flex","justify-between","items-center","cursor-pointer",3,"click"],[1,"flex","items-center","gap-3","mb-2"],[1,"text-xl","font-bold","text-gray-900"],[1,"badge","bg-purple-100","text-purple-800"],[1,"grid","grid-cols-4","gap-4","text-sm"],[1,"text-gray-600"],[1,"ml-2","font-semibold","text-gray-900"],[1,"ml-2","font-semibold","text-primary-600"],[1,"ml-2","font-semibold","text-gray-700"],[1,"flex","items-center","gap-3"],[1,"btn-primary","text-sm",3,"click","routerLink"],[1,"text-gray-400","hover:text-gray-600","text-2xl"],[1,"mt-4","pt-4","border-t","border-gray-200","animate-slide-up"],[1,"text-lg","font-semibold","text-gray-900","mb-3"],[1,"text-sm","text-gray-500","text-center","py-4"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-4","py-2","text-left","text-xs","font-medium","text-gray-500","uppercase"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"px-4","py-3","text-sm","font-medium","text-gray-900"],[1,"px-4","py-3","text-sm","text-gray-600"],[1,"px-4","py-3","text-sm","text-gray-900"],[1,"px-4","py-3","text-sm"]],template:function(l,r){l&1&&(i(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"div",4),C(5,"img",5),e(),i(6,"div",6)(7,"a",7),n(8,"Dashboard"),e(),i(9,"a",8),n(10,"Investidores"),e(),i(11,"a",9),n(12,"Carteiras"),e()(),i(13,"div",10)(14,"span",11),n(15,"Ol\xE1, "),i(16,"span",12),n(17),e()(),i(18,"button",13),g("click",function(){return r.abrirModalLogout()}),n(19,"Sair"),e()()()()(),i(20,"main",14),_(21,Q,4,0,"div",15)(22,st,1,1),e(),C(23,"app-footer"),i(24,"app-confirm-modal",16),g("confirm",function(){return r.confirmarLogout()})("cancel",function(){return r.cancelarLogout()}),e()()),l&2&&(o(17),x(r.userName()),o(4),c(21,r.loading()&&!r.investidor()?21:22),o(3),y("show",r.showLogoutModal())("title","Sair do Sistema")("message","Voc\xEA deseja realmente sair do sistema? Voc\xEA precisar\xE1 fazer login novamente para acessar.")("confirmText","Sair")("cancelText","Cancelar")("type","warning")("icon","\u{1F44B}"))},dependencies:[L,P,$,R]})}}return a})();export{It as InvestidorDetailComponent};
