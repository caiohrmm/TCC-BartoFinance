import{a as re}from"./chunk-OULKYF5Q.js";import{a as le}from"./chunk-XCDLY2PJ.js";import{b as B,c as C,d as z,e as G,g as U,h as Q,i as H,j as J,k as K,l as W,m as X,o as Y,q as Z,s as ee}from"./chunk-THL34FZA.js";import{a as ce,b as de}from"./chunk-JRTYZLGQ.js";import{a as oe}from"./chunk-QGIMMVU2.js";import{a as $}from"./chunk-HSZE64OI.js";import{a as ie,b as ae,c as ne}from"./chunk-7YW65ONQ.js";import{$ as w,A as l,Aa as j,B as S,Da as te,H as f,J as _,L as D,N as T,O as p,Q as F,R as I,S as i,T as t,U as g,V as y,W as x,X as s,Y as a,Z as v,_ as b,a as V,b as M,fa as L,ga as N,o as O,qa as P,s as h,t as E,xa as R,za as q}from"./chunk-EECCVOVP.js";var se=[{value:"CDB",label:"CDB",icon:"\u{1F3E6}",description:"Certificado de Dep\xF3sito Banc\xE1rio"},{value:"TESOURO_DIRETO",label:"Tesouro Direto",icon:"\u{1F3DB}\uFE0F",description:"Tesouro Direto"},{value:"ACOES",label:"A\xE7\xF5es",icon:"\u{1F4C8}",description:"A\xE7\xF5es"},{value:"FUNDOS",label:"Fundos",icon:"\u{1F4BC}",description:"Fundos de Investimento"},{value:"CRIPTOMOEDAS",label:"Criptomoedas",icon:"\u20BF",description:"Criptomoedas"},{value:"OUTROS",label:"Outros",icon:"\u{1F4CA}",description:"Outros"}],me=[{value:"ATIVA",label:"Ativa",color:"green",icon:"\u2713",description:"Aplica\xE7\xE3o Ativa"},{value:"RESGATADA",label:"Resgatada",color:"blue",icon:"\u{1F4B0}",description:"Aplica\xE7\xE3o Resgatada"},{value:"ENCERRADA",label:"Encerrada",color:"gray",icon:"\u25A0",description:"Aplica\xE7\xE3o Encerrada"}];var k=(n,c)=>c.value,ue=(n,c)=>c.id,_e=n=>["/investidores",n];function xe(n,c){n&1&&(i(0,"div",15),g(1,"span",18),i(2,"p",19),a(3,"Carregando detalhes..."),t()())}function Ce(n,c){if(n&1&&(i(0,"span",50),a(1),t()),n&2){let e=s().$implicit;l(),w(" ",e.icon," ",e.label," ")}}function fe(n,c){if(n&1&&_(0,Ce,2,2,"span",50),n&2){let e=c.$implicit,r=s(2);p(0,r.tipo===e.value?0:-1)}}function ve(n,c){n&1&&F(0,fe,1,1,null,null,k),n&2&&I(c)}function he(n,c){if(n&1&&(i(0,"span"),a(1),t()),n&2){let e=s().$implicit;T("badge bg-"+e.color+"-100 text-"+e.color+"-800"),l(),w(" ",e.icon," ",e.label," ")}}function Ee(n,c){if(n&1&&_(0,he,2,4,"span",51),n&2){let e=c.$implicit,r=s(2);p(0,r.risco===e.value?0:-1)}}function ge(n,c){n&1&&F(0,Ee,1,1,null,null,k),n&2&&I(c)}function be(n,c){if(n&1&&(i(0,"p",29),a(1),t()),n&2){let e=s();l(),v(e.descricao)}}function Se(n,c){if(n&1&&(i(0,"div",30)(1,"span",12),a(2,"Investidor:"),t(),i(3,"a",52),a(4),t()()),n&2){let e=c;l(3),D("routerLink",N(2,_e,e.id)),l(),b(" ",e.nome," ")}}function Ae(n,c){n&1&&(i(0,"div",53)(1,"div",54)(2,"span",55),a(3,"\u{1F4CB}"),t(),i(4,"div")(5,"h4",56),a(6,"Carteira Modelo"),t(),i(7,"p",57),a(8," Esta \xE9 uma carteira modelo (template) sem investidor vinculado. As aplica\xE7\xF5es cadastradas aqui servem como refer\xEAncia. Ao vincular um investidor, voc\xEA poder\xE1 definir os valores reais dos investimentos. "),t()()()())}function De(n,c){if(n&1){let e=y();i(0,"div",49)(1,"p",58),a(2,"\u{1F4CA}"),t(),i(3,"p",59),a(4,"Nenhuma aplica\xE7\xE3o registrada."),t(),i(5,"p",60),a(6,"Comece adicionando uma aplica\xE7\xE3o nesta carteira."),t(),i(7,"button",61),x("click",function(){h(e);let o=s(3);return E(o.abrirModalAplicacao())}),a(8," Adicionar Primeira Aplica\xE7\xE3o "),t()()}}function ye(n,c){if(n&1&&(i(0,"span",71),a(1),t()),n&2){let e=c;l(),w(" ",e.icon," ",e.label," ")}}function we(n,c){if(n&1&&(i(0,"span"),a(1),t()),n&2){let e=c;T("badge bg-"+e.color+"-100 text-"+e.color+"-800"),l(),w(" ",e.icon," ",e.label," ")}}function Te(n,c){if(n&1&&(i(0,"div",40),a(1),t()),n&2){let e=s().$implicit,r=s(4);l(),v(r.formatarData(e.dataVenda))}}function Fe(n,c){if(n&1){let e=y();i(0,"button",75),x("click",function(){h(e);let o=s().$implicit,d=s(4);return E(d.abrirModalAplicacao(o))}),a(1," \u270F\uFE0F "),t(),i(2,"button",76),x("click",function(){h(e);let o=s().$implicit,d=s(4);return E(d.abrirModalEncerrar(o))}),a(3," \u{1F512} "),t()}}function Ie(n,c){if(n&1){let e=y();i(0,"tr",68)(1,"td",69)(2,"div")(3,"div",70),a(4),t(),i(5,"div",43),a(6),t()()(),i(7,"td",69),_(8,ye,2,2,"span",71),t(),i(9,"td",69)(10,"div",72),a(11),t()(),i(12,"td",69)(13,"div",72),a(14),t()(),i(15,"td",69)(16,"div"),a(17),t(),i(18,"div",43),a(19),t()(),i(20,"td",69),_(21,we,2,4,"span",51)(22,Te,2,1,"div",40),t(),i(23,"td",73),_(24,Fe,4,0),i(25,"button",74),x("click",function(){let o=h(e).$implicit,d=s(4);return E(d.abrirModalExclusao(o))}),a(26," \u{1F5D1}\uFE0F "),t()()()}if(n&2){let e,r,o=c.$implicit,d=s(4);l(4),v(o.codigoAtivo),l(2),v(d.formatarData(o.dataCompra)),l(2),p(8,(e=d.getTipoProdutoInfo(o.tipoProduto))?8:-1,e),l(3),v(d.formatarValor(o.valorAplicado)),l(3),v(o.quantidade),l(2),T(o.rentabilidadeAtual>=0?"text-sm font-medium text-green-600":"text-sm font-medium text-red-600"),l(),b(" ",d.formatarPercentual(o.rentabilidadeAtual)," "),l(2),b(" ",d.formatarValor(d.calcularLucro(o))," "),l(2),p(21,(r=d.getStatusInfo(o.status))?21:-1,r),l(),p(22,o.dataVenda?22:-1),l(2),p(24,o.status==="ATIVA"?24:-1)}}function Ve(n,c){if(n&1&&(i(0,"div",62)(1,"table",63)(2,"thead",64)(3,"tr")(4,"th",65),a(5,"Ativo"),t(),i(6,"th",65),a(7,"Tipo"),t(),i(8,"th",65),a(9,"Valor Aplicado"),t(),i(10,"th",65),a(11,"Quantidade"),t(),i(12,"th",65),a(13,"Rentabilidade"),t(),i(14,"th",65),a(15,"Status"),t(),i(16,"th",66),a(17,"A\xE7\xF5es"),t()()(),i(18,"tbody",67),F(19,Ie,27,12,"tr",68,ue),t()()()),n&2){let e=s(3);l(19),I(e.aplicacoes())}}function Me(n,c){if(n&1){let e=y();i(0,"div",20)(1,"a",21),a(2,"Carteiras"),t(),i(3,"span",22),a(4,"\u203A"),t(),i(5,"span",23),a(6),t()(),i(7,"div",24)(8,"div",25)(9,"div",26)(10,"div",27)(11,"h2",28),a(12),t(),_(13,ve,2,0)(14,ge,2,0),t(),_(15,be,2,1,"p",29)(16,Se,5,4,"div",30)(17,Ae,9,0),i(18,"div",31)(19,"div")(20,"span",12),a(21,"Criada em:"),t(),a(22),t(),i(23,"div")(24,"span",12),a(25,"\xDAltima atualiza\xE7\xE3o:"),t(),a(26),t()()(),i(27,"button",32),a(28," \u2190 Voltar "),t()()(),i(29,"div",33)(30,"div",34)(31,"p",35),a(32,"Total Aplicado"),t(),i(33,"p",36),a(34),t()(),i(35,"div",37)(36,"p",35),a(37,"Valor Atual"),t(),i(38,"p",38),a(39),t()(),i(40,"div",39)(41,"p",35),a(42,"Rentabilidade"),t(),i(43,"p"),a(44),t(),i(45,"p",40),a(46),t()(),i(47,"div",41)(48,"p",35),a(49,"Aplica\xE7\xF5es"),t(),i(50,"div",42)(51,"p",36),a(52),t(),i(53,"p",43),a(54),t()()()(),i(55,"div",44)(56,"div",45)(57,"h3",36),a(58,"Aplica\xE7\xF5es"),t(),i(59,"button",46),x("click",function(){h(e);let o=s(2);return E(o.abrirModalAplicacao())}),i(60,"span",47),a(61,"\u2795"),t(),a(62," Nova Aplica\xE7\xE3o "),t()(),i(63,"div",48),_(64,De,9,0,"div",49)(65,Ve,21,0),t()()}if(n&2){let e,r,o,d=c,m=s(2);l(6),v(d.nome),l(6),v(d.nome),l(),p(13,(e=m.tipoOptions)?13:-1,e),l(),p(14,(r=m.riscoOptions)?14:-1,r),l(),p(15,d.descricao?15:-1),l(),p(16,(o=m.investidor())?16:d.tipo==="MODELO"?17:-1,o),l(6),b(" ",m.formatarData(d.createdAt)," "),l(4),b(" ",m.formatarData(d.updatedAt)," "),l(8),v(m.formatarValor(m.totalAplicado)),l(5),v(m.formatarValor(m.totalAtual)),l(4),T(m.rentabilidadeGeral>=0?"text-2xl font-bold text-green-600":"text-2xl font-bold text-red-600"),l(),b(" ",m.formatarPercentual(m.rentabilidadeGeral)," "),l(2),b("Meta: ",m.formatarPercentual(d.metaRentabilidade),""),l(6),v(m.aplicacoes().length),l(2),w(" (",m.aplicacoesAtivas," ativas, ",m.aplicacoesEncerradas," encerradas) "),l(10),p(64,m.aplicacoes().length===0?64:65)}}function ke(n,c){if(n&1&&_(0,Me,66,18),n&2){let e,r=s();p(0,(e=r.carteira())?0:-1,e)}}function Oe(n,c){n&1&&(i(0,"div",80)(1,"div",104)(2,"span",105),a(3,"\u2139\uFE0F"),t(),i(4,"p",57)(5,"strong"),a(6,"Carteira Modelo:"),t(),a(7," Os valores e quantidades s\xE3o apenas refer\xEAncias para o template. "),t()()())}function Le(n,c){if(n&1&&(i(0,"option",86),a(1),t()),n&2){let e=c.$implicit;D("value",e.value),l(),w("",e.icon," ",e.label,"")}}function Ne(n,c){n&1&&(i(0,"p",87),a(1,"Tipo \xE9 obrigat\xF3rio"),t())}function Pe(n,c){n&1&&(i(0,"p",87),a(1,"C\xF3digo \xE9 obrigat\xF3rio (2-20 caracteres)"),t())}function Re(n,c){n&1&&(i(0,"p",87),a(1,"Valor deve ser maior que zero"),t())}function qe(n,c){n&1&&(i(0,"p",87),a(1,"Quantidade deve ser maior que zero"),t())}function je(n,c){n&1&&(i(0,"p",87),a(1,"Data \xE9 obrigat\xF3ria"),t())}function $e(n,c){if(n&1){let e=y();i(0,"div",16)(1,"div",77)(2,"div",45)(3,"h3",78),a(4),t(),i(5,"button",79),x("click",function(){h(e);let o=s();return E(o.fecharModalAplicacao())}),a(6,"\u2715"),t()(),_(7,Oe,8,0,"div",80),i(8,"form",81),x("ngSubmit",function(){h(e);let o=s();return E(o.salvarAplicacao())}),i(9,"div",82)(10,"div")(11,"label",83),a(12,"Tipo de Produto *"),t(),i(13,"select",84)(14,"option",85),a(15,"Selecione o tipo"),t(),F(16,Le,2,3,"option",86,k),t(),_(18,Ne,2,0,"p",87),t(),i(19,"div")(20,"label",88),a(21,"C\xF3digo do Ativo *"),t(),g(22,"input",89),_(23,Pe,2,0,"p",87),t(),i(24,"div")(25,"label",90),a(26,"Valor Aplicado *"),t(),g(27,"input",91),_(28,Re,2,0,"p",87),t(),i(29,"div")(30,"label",92),a(31,"Quantidade *"),t(),g(32,"input",93),_(33,qe,2,0,"p",87),t(),i(34,"div")(35,"label",94),a(36,"Data da Compra *"),t(),g(37,"input",95),_(38,je,2,0,"p",87),t(),i(39,"div")(40,"label",96),a(41,"Rentabilidade Atual (%)"),t(),g(42,"input",97),i(43,"p",40),a(44,"Pode ser negativo (preju\xEDzo)"),t()(),i(45,"div",98)(46,"label",99),a(47,"Notas (Opcional)"),t(),g(48,"textarea",100),t()(),i(49,"div",101)(50,"button",102),x("click",function(){h(e);let o=s();return E(o.fecharModalAplicacao())}),a(51," Cancelar "),t(),i(52,"button",103),a(53),t()()()()()}if(n&2){let e,r,o,d,m,A,u=s();l(4),b(" ",u.isEditingAplicacao()?"Editar Aplica\xE7\xE3o":"Nova Aplica\xE7\xE3o"," "),l(3),p(7,((e=u.carteira())==null?null:e.tipo)==="MODELO"&&!((e=u.carteira())!=null&&e.investidorId)?7:-1),l(),D("formGroup",u.aplicacaoForm),l(8),I(u.tipoProdutoOptions),l(2),p(18,(r=u.aplicacaoForm.get("tipoProduto"))!=null&&r.invalid&&((r=u.aplicacaoForm.get("tipoProduto"))!=null&&r.touched)?18:-1),l(5),p(23,(o=u.aplicacaoForm.get("codigoAtivo"))!=null&&o.invalid&&((o=u.aplicacaoForm.get("codigoAtivo"))!=null&&o.touched)?23:-1),l(5),p(28,(d=u.aplicacaoForm.get("valorAplicado"))!=null&&d.invalid&&((d=u.aplicacaoForm.get("valorAplicado"))!=null&&d.touched)?28:-1),l(5),p(33,(m=u.aplicacaoForm.get("quantidade"))!=null&&m.invalid&&((m=u.aplicacaoForm.get("quantidade"))!=null&&m.touched)?33:-1),l(5),p(38,(A=u.aplicacaoForm.get("dataCompra"))!=null&&A.invalid&&((A=u.aplicacaoForm.get("dataCompra"))!=null&&A.touched)?38:-1),l(14),D("disabled",u.loading()||u.aplicacaoForm.invalid),l(),b(" ",u.isEditingAplicacao()?"Salvar Altera\xE7\xF5es":"Criar Aplica\xE7\xE3o"," ")}}function Be(n,c){if(n&1){let e=y();i(0,"div",107)(1,"p",108)(2,"span",12),a(3,"Ativo:"),t(),a(4),t(),i(5,"p",109)(6,"span",12),a(7,"Valor Aplicado:"),t(),a(8),t()(),i(9,"form",81),x("ngSubmit",function(){h(e);let o=s(2);return E(o.confirmarEncerrar())}),i(10,"div",110)(11,"label",111),a(12,"Data da Venda *"),t(),g(13,"input",112),t(),i(14,"div",44)(15,"label",113),a(16,"Rentabilidade Final (%) *"),t(),g(17,"input",114),i(18,"p",40),a(19,"Rentabilidade final calculada na venda"),t()(),i(20,"div",115)(21,"button",102),x("click",function(){h(e);let o=s(2);return E(o.cancelarEncerrar())}),a(22," Cancelar "),t(),i(23,"button",116),a(24," Encerrar Aplica\xE7\xE3o "),t()()()}if(n&2){let e=c,r=s(2);l(4),b(" ",e.codigoAtivo," "),l(4),b(" ",r.formatarValor(e.valorAplicado)," "),l(),D("formGroup",r.encerrarForm)}}function ze(n,c){if(n&1){let e=y();i(0,"div",16)(1,"div",106)(2,"div",45)(3,"h3",78),a(4,"\u{1F512} Encerrar Aplica\xE7\xE3o"),t(),i(5,"button",79),x("click",function(){h(e);let o=s();return E(o.cancelarEncerrar())}),a(6,"\u2715"),t()(),_(7,Be,25,3),t()()}if(n&2){let e,r=s();l(7),p(7,(e=r.aplicacaoToEncerrar())?7:-1,e)}}var dt=(()=>{class n{constructor(e,r,o,d,m,A,u,pe){this.route=e,this.router=r,this.portfolioService=o,this.aplicacaoService=d,this.investidorService=m,this.toastService=A,this.authService=u,this.fb=pe,this.carteira=f(null),this.aplicacoes=f([]),this.investidor=f(null),this.loading=f(!1),this.showAplicacaoModal=f(!1),this.showEncerrarModal=f(!1),this.showDeleteModal=f(!1),this.showLogoutModal=f(!1),this.isEditingAplicacao=f(!1),this.currentAplicacaoId=f(null),this.aplicacaoToDelete=f(null),this.aplicacaoToEncerrar=f(null),this.userName=f(""),this.carteiraId="",this.tipoProdutoOptions=se,this.riscoOptions=de,this.tipoOptions=ce,this.statusOptions=me,this.aplicacaoForm=this.fb.group({tipoProduto:["",[C.required]],codigoAtivo:["",[C.required,C.minLength(2),C.maxLength(20)]],valorAplicado:[0,[C.required,C.min(.01)]],quantidade:[0,[C.required,C.min(.01)]],dataCompra:["",[C.required]],rentabilidadeAtual:[0,[C.min(-100),C.max(1e3)]],notas:["",[C.maxLength(500)]]}),this.encerrarForm=this.fb.group({dataVenda:["",[C.required]],rentabilidadeFinal:[0,[C.required]]})}ngOnInit(){let e=this.authService.currentUser();e&&this.userName.set(e.nome),this.carteiraId=this.route.snapshot.paramMap.get("id"),this.carteiraId&&(this.carregarCarteira(),this.carregarAplicacoes())}carregarCarteira(){this.loading.set(!0),this.portfolioService.buscarPorId(this.carteiraId).subscribe({next:e=>{this.carteira.set(e.data),e.data.investidorId&&this.carregarInvestidor(e.data.investidorId),this.loading.set(!1)},error:e=>{this.loading.set(!1),this.toastService.error(e.error?.mensagem||"Erro ao carregar carteira"),this.router.navigate(["/carteiras"])}})}carregarInvestidor(e){this.investidorService.buscarPorId(e).subscribe({next:r=>{this.investidor.set(r.data)},error:()=>{}})}carregarAplicacoes(){this.aplicacaoService.listarAplicacoes(this.carteiraId).subscribe({next:e=>{this.aplicacoes.set(e.data)},error:e=>{this.toastService.error(e.error?.mensagem||"Erro ao carregar aplica\xE7\xF5es")}})}abrirModalAplicacao(e){e?(this.isEditingAplicacao.set(!0),this.currentAplicacaoId.set(e.id),this.aplicacaoForm.patchValue(M(V({},e),{dataCompra:this.formatDateForInput(e.dataCompra)}))):(this.isEditingAplicacao.set(!1),this.currentAplicacaoId.set(null),this.aplicacaoForm.reset({valorAplicado:0,quantidade:0,rentabilidadeAtual:0,dataCompra:this.formatDateForInput(new Date().toISOString())})),this.showAplicacaoModal.set(!0)}fecharModalAplicacao(){this.showAplicacaoModal.set(!1),this.aplicacaoForm.reset()}salvarAplicacao(){if(this.aplicacaoForm.invalid){this.toastService.warning("Preencha todos os campos obrigat\xF3rios corretamente"),this.aplicacaoForm.markAllAsTouched();return}this.loading.set(!0);let e=this.aplicacaoForm.value,r=e.dataCompra,o=r.includes("T")?r:`${r}T00:00:00`,d=M(V({portfolioId:this.carteiraId},e),{dataCompra:o});(this.isEditingAplicacao()?this.aplicacaoService.atualizarAplicacao(this.currentAplicacaoId(),d):this.aplicacaoService.criarAplicacao(d)).subscribe({next:()=>{this.loading.set(!1),this.toastService.success(this.isEditingAplicacao()?"Aplica\xE7\xE3o atualizada!":"Aplica\xE7\xE3o criada!"),this.fecharModalAplicacao(),this.carregarAplicacoes(),this.carregarCarteira()},error:A=>{this.loading.set(!1),this.toastService.error(A.error?.mensagem||"Erro ao salvar aplica\xE7\xE3o")}})}abrirModalEncerrar(e){this.aplicacaoToEncerrar.set(e),this.encerrarForm.patchValue({dataVenda:this.formatDateForInput(new Date().toISOString()),rentabilidadeFinal:e.rentabilidadeAtual||0}),this.showEncerrarModal.set(!0)}confirmarEncerrar(){if(this.encerrarForm.invalid){this.toastService.warning("Preencha todos os campos");return}let e=this.aplicacaoToEncerrar();if(!e)return;this.loading.set(!0),this.showEncerrarModal.set(!1);let{dataVenda:r,rentabilidadeFinal:o}=this.encerrarForm.value,d=r.includes("T")?r:`${r}T00:00:00`;this.aplicacaoService.encerrarAplicacao(e.id,d,o).subscribe({next:()=>{this.loading.set(!1),this.toastService.success("Aplica\xE7\xE3o encerrada com sucesso!"),this.aplicacaoToEncerrar.set(null),this.carregarAplicacoes(),this.carregarCarteira()},error:m=>{this.loading.set(!1),this.toastService.error(m.error?.mensagem||"Erro ao encerrar aplica\xE7\xE3o")}})}cancelarEncerrar(){this.showEncerrarModal.set(!1),this.aplicacaoToEncerrar.set(null)}abrirModalExclusao(e){this.aplicacaoToDelete.set(e),this.showDeleteModal.set(!0)}confirmarExclusao(){let e=this.aplicacaoToDelete();e&&(this.loading.set(!0),this.showDeleteModal.set(!1),this.aplicacaoService.deletarAplicacao(e.id).subscribe({next:()=>{this.loading.set(!1),this.toastService.success("Aplica\xE7\xE3o exclu\xEDda!"),this.aplicacaoToDelete.set(null),this.carregarAplicacoes(),this.carregarCarteira()},error:r=>{this.loading.set(!1),this.toastService.error(r.error?.mensagem||"Erro ao excluir aplica\xE7\xE3o")}}))}cancelarExclusao(){this.showDeleteModal.set(!1),this.aplicacaoToDelete.set(null)}abrirModalLogout(){this.showLogoutModal.set(!0)}confirmarLogout(){this.showLogoutModal.set(!1),this.authService.logout()}cancelarLogout(){this.showLogoutModal.set(!1)}getTipoProdutoInfo(e){return this.tipoProdutoOptions.find(r=>r.value===e)}getStatusInfo(e){return this.statusOptions.find(r=>r.value===e)}formatarValor(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}formatarPercentual(e){return`${e>=0?"+":""}${e.toFixed(2)}%`}formatarData(e){return new Date(e).toLocaleDateString("pt-BR")}formatDateForInput(e){return e.split("T")[0]}calcularLucro(e){return e.valorAplicado*(e.rentabilidadeAtual/100)}calcularValorAtual(e){return e.valorAplicado+this.calcularLucro(e)}get totalAplicado(){return this.aplicacoes().reduce((e,r)=>e+r.valorAplicado,0)}get totalAtual(){return this.aplicacoes().reduce((e,r)=>e+this.calcularValorAtual(r),0)}get rentabilidadeGeral(){return this.totalAplicado===0?0:(this.totalAtual-this.totalAplicado)/this.totalAplicado*100}get aplicacoesAtivas(){return this.aplicacoes().filter(e=>e.status==="ATIVA").length}get aplicacoesEncerradas(){return this.aplicacoes().filter(e=>e.status==="ENCERRADA").length}static{this.\u0275fac=function(r){return new(r||n)(S(R),S(q),S(oe),S(re),S(ne),S($),S(te),S(Z))}}static{this.\u0275cmp=O({type:n,selectors:[["app-carteira-detail"]],standalone:!0,features:[L],decls:28,vars:18,consts:[[1,"min-h-screen","bg-gray-50","flex","flex-col"],[1,"bg-white","shadow-sm","border-b","border-gray-200"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","h-20"],[1,"flex","items-center"],["src","assets/logo.png","alt","BartoFinance","routerLink","/dashboard",1,"h-16","w-auto","hover:opacity-80","transition-opacity","cursor-pointer"],[1,"hidden","md:flex","items-center","space-x-8"],["routerLink","/dashboard",1,"text-gray-600","hover:text-primary-600","transition"],["routerLink","/investidores",1,"text-gray-600","hover:text-primary-600","transition"],["routerLink","/carteiras",1,"text-gray-900","hover:text-primary-600","font-medium","transition"],[1,"flex","items-center","space-x-4"],[1,"text-sm","text-gray-700"],[1,"font-semibold"],[1,"btn-ghost","text-sm",3,"click"],[1,"flex-1","max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8","w-full"],[1,"flex","justify-center","items-center","py-12"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-75","flex","items-center","justify-center","z-50","animate-fade-in"],[3,"confirm","cancel","show","title","message","confirmText","cancelText","type","icon"],[1,"animate-spin","rounded-full","h-12","w-12","border-4","border-primary-500","border-t-transparent"],[1,"ml-4","text-primary-600"],[1,"mb-6","flex","items-center","text-sm","text-gray-600","animate-fade-in"],["routerLink","/carteiras",1,"hover:text-primary-600"],[1,"mx-2"],[1,"text-gray-900","font-medium"],[1,"card","mb-6","animate-slide-up"],[1,"flex","justify-between","items-start"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-3"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mb-4"],[1,"flex","items-center","gap-2","text-sm","text-gray-700","mb-2"],[1,"grid","grid-cols-2","gap-4","mt-4","text-sm","text-gray-600"],["routerLink","/carteiras",1,"btn-ghost"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-6","mb-8"],[1,"card","animate-slide-up","animation-delay-200"],[1,"text-sm","font-medium","text-gray-600","mb-1"],[1,"text-2xl","font-bold","text-gray-900"],[1,"card","animate-slide-up","animation-delay-300"],[1,"text-2xl","font-bold","text-primary-600"],[1,"card","animate-slide-up","animation-delay-400"],[1,"text-xs","text-gray-500","mt-1"],[1,"card","animate-slide-up","animation-delay-500"],[1,"flex","items-baseline","gap-2"],[1,"text-xs","text-gray-500"],[1,"mb-6"],[1,"flex","justify-between","items-center","mb-4"],[1,"btn-primary","flex","items-center",3,"click"],[1,"mr-2"],[1,"card"],[1,"text-center","py-8","text-gray-500"],[1,"badge","bg-purple-100","text-purple-800"],[3,"class"],[1,"text-primary-600","hover:text-primary-800","font-medium",3,"routerLink"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4","mb-4"],[1,"flex","items-start","gap-3"],[1,"text-2xl"],[1,"font-semibold","text-blue-900","mb-1"],[1,"text-sm","text-blue-800"],[1,"text-4xl","mb-4"],[1,"text-lg","font-medium"],[1,"text-sm","mt-2"],[1,"btn-primary","mt-6",3,"click"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase"],["scope","col",1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"badge","bg-gray-100","text-gray-800"],[1,"text-sm","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],["title","Excluir",1,"text-red-600","hover:text-red-900",3,"click"],["title","Editar",1,"text-primary-600","hover:text-primary-900","mr-3",3,"click"],["title","Encerrar",1,"text-yellow-600","hover:text-yellow-900","mr-3",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","p-6","w-full","max-w-2xl","max-h-[90vh]","overflow-y-auto","animate-slide-up"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-gray-400","hover:text-gray-600",3,"click"],[1,"bg-blue-50","border-l-4","border-blue-500","p-3","mb-4"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],["for","tipoProduto",1,"label"],["id","tipoProduto","formControlName","tipoProduto",1,"input"],["value","","disabled",""],[3,"value"],[1,"text-red-600","text-sm","mt-1"],["for","codigoAtivo",1,"label"],["id","codigoAtivo","type","text","formControlName","codigoAtivo","placeholder","Ex: PETR4, VALE3",1,"input"],["for","valorAplicado",1,"label"],["id","valorAplicado","type","text","formControlName","valorAplicado","placeholder","R$ 0,00","appCurrencyMask","",1,"input"],["for","quantidade",1,"label"],["id","quantidade","type","number","formControlName","quantidade","placeholder","0","step","0.01","min","0.01",1,"input"],["for","dataCompra",1,"label"],["id","dataCompra","type","date","formControlName","dataCompra",1,"input"],["for","rentabilidadeAtual",1,"label"],["id","rentabilidadeAtual","type","number","formControlName","rentabilidadeAtual","placeholder","0.00","step","0.01",1,"input"],[1,"md:col-span-2"],["for","notas",1,"label"],["id","notas","formControlName","notas","rows","2","placeholder","Observa\xE7\xF5es sobre esta aplica\xE7\xE3o...",1,"input"],[1,"flex","justify-end","space-x-4","mt-6"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[1,"flex","items-center","gap-2"],[1,"text-blue-600"],[1,"bg-white","rounded-lg","shadow-xl","p-6","w-full","max-w-md","animate-slide-up"],[1,"mb-4","p-4","bg-yellow-50","border","border-yellow-200","rounded-lg"],[1,"text-sm","text-yellow-800","mb-2"],[1,"text-sm","text-yellow-800"],[1,"mb-4"],["for","dataVenda",1,"label"],["id","dataVenda","type","date","formControlName","dataVenda",1,"input"],["for","rentabilidadeFinal",1,"label"],["id","rentabilidadeFinal","type","number","formControlName","rentabilidadeFinal","placeholder","0.00","step","0.01",1,"input"],[1,"flex","justify-end","space-x-4"],["type","submit",1,"bg-yellow-600","text-white","px-4","py-2","rounded-lg","hover:bg-yellow-700","transition"]],template:function(r,o){if(r&1&&(i(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"div",4),g(5,"img",5),t(),i(6,"div",6)(7,"a",7),a(8,"Dashboard"),t(),i(9,"a",8),a(10,"Investidores"),t(),i(11,"a",9),a(12,"Carteiras"),t()(),i(13,"div",10)(14,"span",11),a(15,"Ol\xE1, "),i(16,"span",12),a(17),t()(),i(18,"button",13),x("click",function(){return o.abrirModalLogout()}),a(19,"Sair"),t()()()()(),i(20,"main",14),_(21,xe,4,0,"div",15)(22,ke,1,1),t(),_(23,$e,54,10,"div",16)(24,ze,8,1,"div",16),g(25,"app-footer"),i(26,"app-confirm-modal",17),x("confirm",function(){return o.confirmarExclusao()})("cancel",function(){return o.cancelarExclusao()}),t(),i(27,"app-confirm-modal",17),x("confirm",function(){return o.confirmarLogout()})("cancel",function(){return o.cancelarLogout()}),t()()),r&2){let d;l(17),v(o.userName()),l(4),p(21,o.loading()&&!o.carteira()?21:o.carteira()?22:-1),l(2),p(23,o.showAplicacaoModal()?23:-1),l(),p(24,o.showEncerrarModal()?24:-1),l(2),D("show",o.showDeleteModal())("title","Excluir Aplica\xE7\xE3o")("message","Tem certeza que deseja excluir a aplica\xE7\xE3o "+(((d=o.aplicacaoToDelete())==null?null:d.codigoAtivo)||"")+"? Esta a\xE7\xE3o n\xE3o pode ser desfeita.")("confirmText","Excluir")("cancelText","Cancelar")("type","danger")("icon","\u{1F5D1}\uFE0F"),l(),D("show",o.showLogoutModal())("title","Sair do Sistema")("message","Voc\xEA deseja realmente sair do sistema? Voc\xEA precisar\xE1 fazer login novamente para acessar.")("confirmText","Sair")("cancelText","Cancelar")("type","warning")("icon","\u{1F44B}")}},dependencies:[P,j,ie,ee,U,W,X,B,Q,K,z,G,Y,H,J,ae,le]})}}return n})();export{dt as CarteiraDetailComponent};
