import{b as R,c as d,d as T,e as N,g as M,i as w,j as k,q,s as D}from"./chunk-S2EJ55TC.js";import{a as y}from"./chunk-SEIL6NAD.js";import{D as o,E as c,Ga as E,Ha as F,K as C,Ka as j,M as u,O as f,Q as g,R as m,V as l,W as r,X as p,Z as b,_ as h,ca as n,la as S,r as _,xa as x}from"./chunk-FEKYFKK3.js";function B(t,s){t&1&&n(0," Nome \xE9 obrigat\xF3rio ")}function G(t,s){t&1&&n(0," Nome deve ter no m\xEDnimo 3 caracteres ")}function I(t,s){if(t&1&&(l(0,"p",10),u(1,B,1,0)(2,G,1,0),r()),t&2){let i=h();o(),m(1,!(i.nome==null||i.nome.errors==null)&&i.nome.errors.required?1:-1),o(),m(2,!(i.nome==null||i.nome.errors==null)&&i.nome.errors.minlength?2:-1)}}function L(t,s){t&1&&n(0," Email \xE9 obrigat\xF3rio ")}function A(t,s){t&1&&n(0," Email inv\xE1lido ")}function P(t,s){if(t&1&&(l(0,"p",10),u(1,L,1,0)(2,A,1,0),r()),t&2){let i=h();o(),m(1,!(i.email==null||i.email.errors==null)&&i.email.errors.required?1:-1),o(),m(2,!(i.email==null||i.email.errors==null)&&i.email.errors.email?2:-1)}}function V(t,s){t&1&&n(0," Senha \xE9 obrigat\xF3ria ")}function O(t,s){t&1&&n(0," Senha deve ter no m\xEDnimo 6 caracteres ")}function J(t,s){if(t&1&&(l(0,"p",10),u(1,V,1,0)(2,O,1,0),r()),t&2){let i=h();o(),m(1,!(i.senha==null||i.senha.errors==null)&&i.senha.errors.required?1:-1),o(),m(2,!(i.senha==null||i.senha.errors==null)&&i.senha.errors.minlength?2:-1)}}function z(t,s){t&1&&(l(0,"span",20),n(1,"\u23F3"),r(),n(2," Criando conta... "))}function H(t,s){t&1&&n(0," Criar Conta ")}var ie=(()=>{class t{constructor(i,a,e,v){this.fb=i,this.authService=a,this.toastService=e,this.router=v,this.loading=C(!1),this.registerForm=this.fb.group({nome:["",[d.required,d.minLength(3)]],email:["",[d.required,d.email]],senha:["",[d.required,d.minLength(6)]]})}onSubmit(){this.registerForm.valid?(this.loading.set(!0),this.authService.register(this.registerForm.value).subscribe({next:i=>{console.log("Register component - success, navigating to dashboard"),this.toastService.success("Conta criada com sucesso! Bem-vindo ao BartoFinance! \u{1F389}"),this.loading.set(!1),setTimeout(()=>{this.router.navigate(["/dashboard"]).then(a=>{console.log("Navigation result:",a),a||(console.error("Navigation failed! Trying again..."),setTimeout(()=>{this.router.navigate(["/dashboard"])},100))})},100)},error:i=>{console.error("Register error:",i),this.loading.set(!1);let a=i.error?.mensagem||"Erro ao criar conta. Tente novamente.";this.toastService.error(a)}})):this.toastService.warning("Por favor, preencha todos os campos corretamente.")}get nome(){return this.registerForm.get("nome")}get email(){return this.registerForm.get("email")}get senha(){return this.registerForm.get("senha")}static{this.\u0275fac=function(a){return new(a||t)(c(q),c(j),c(y),c(E))}}static{this.\u0275cmp=_({type:t,selectors:[["app-register"]],standalone:!0,features:[S],decls:32,vars:12,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-primary-50","to-gray-100","p-4"],[1,"w-full","max-w-md"],[1,"text-center","animate-fade-in","mb-6"],["src","assets/logo.png","alt","BartoFinance",1,"w-auto","mx-auto"],[1,"card","animate-slide-up"],[1,"text-2xl","font-bold","text-center","mb-6"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","nome",1,"label"],["id","nome","type","text","formControlName","nome","placeholder","Seu nome completo"],[1,"text-red-600","text-sm","mt-1"],["for","email",1,"label"],["id","email","type","email","formControlName","email","placeholder","seu@email.com"],[1,"mb-6"],["for","senha",1,"label"],["id","senha","type","password","formControlName","senha","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["type","submit",1,"btn-primary","w-full",3,"disabled"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/login",1,"text-primary-600","hover:text-primary-700","font-medium","ml-1"],[1,"text-center","text-sm","text-gray-500","mt-8"],[1,"inline-block","animate-spin","mr-2"]],template:function(a,e){a&1&&(l(0,"div",0)(1,"div",1)(2,"div",2),p(3,"img",3),r(),l(4,"div",4)(5,"h2",5),n(6,"Criar Conta"),r(),l(7,"form",6),b("ngSubmit",function(){return e.onSubmit()}),l(8,"div",7)(9,"label",8),n(10,"Nome Completo"),r(),p(11,"input",9),u(12,I,3,2,"p",10),r(),l(13,"div",7)(14,"label",11),n(15,"Email"),r(),p(16,"input",12),u(17,P,3,2,"p",10),r(),l(18,"div",13)(19,"label",14),n(20,"Senha"),r(),p(21,"input",15),u(22,J,3,2,"p",10),r(),l(23,"button",16),u(24,z,3,0)(25,H,1,0),r()(),l(26,"div",17),n(27," J\xE1 tem uma conta? "),l(28,"a",18),n(29," Fa\xE7a login "),r()()(),l(30,"p",19),n(31," \xA9 2025 Todos os direitos reservados. "),r()()()),a&2&&(o(7),f("formGroup",e.registerForm),o(4),g(e.nome!=null&&e.nome.invalid&&(e.nome!=null&&e.nome.touched)?"input input-error":"input"),o(),m(12,e.nome!=null&&e.nome.invalid&&(e.nome!=null&&e.nome.touched)?12:-1),o(4),g(e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?"input input-error":"input"),o(),m(17,e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?17:-1),o(4),g(e.senha!=null&&e.senha.invalid&&(e.senha!=null&&e.senha.touched)?"input input-error":"input"),o(),m(22,e.senha!=null&&e.senha.invalid&&(e.senha!=null&&e.senha.touched)?22:-1),o(),f("disabled",e.loading()||e.registerForm.invalid),o(),m(24,e.loading()?24:25))},dependencies:[x,D,M,R,T,N,w,k,F],styles:["[_nghost-%COMP%]{display:block}.card[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}"]})}}return t})();export{ie as RegisterComponent};
