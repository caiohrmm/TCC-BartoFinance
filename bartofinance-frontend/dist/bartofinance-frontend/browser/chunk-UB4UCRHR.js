import{a as F}from"./chunk-KKE4LPTK.js";import{a as B}from"./chunk-MELCVFHK.js";import{a as j,b as M,c as A}from"./chunk-PCOA7WY5.js";import{D as s,E as d,Ha as I,K as m,Ka as k,M as b,O as S,R as y,V as e,W as t,X as p,Z as u,_ as E,ca as i,da as c,ea as C,i as g,la as D,na as _,oa as w,r as h,wa as L,xa as T}from"./chunk-FEKYFKK3.js";function N(n,$){n&1&&(e(0,"div",18),p(1,"span",20),e(2,"p",21),i(3,"Carregando dashboard..."),t()())}function R(n,$){if(n&1&&(e(0,"div",22)(1,"div",23)(2,"div",24)(3,"div")(4,"p",25),i(5,"Investidores"),t(),e(6,"p",26),i(7),t()(),e(8,"div",27)(9,"span",28),i(10,"\u{1F465}"),t()()(),e(11,"p",29),i(12,"Total de clientes ativos"),t()(),e(13,"div",30)(14,"div",24)(15,"div")(16,"p",25),i(17,"Carteiras"),t(),e(18,"p",26),i(19),t()(),e(20,"div",31)(21,"span",28),i(22,"\u{1F4BC}"),t()()(),e(23,"p",29),i(24,"Portf\xF3lios gerenciados"),t()(),e(25,"div",32)(26,"div",24)(27,"div")(28,"p",25),i(29,"Aplica\xE7\xF5es"),t(),e(30,"p",26),i(31),t()(),e(32,"div",33)(33,"span",28),i(34,"\u{1F4CA}"),t()()(),e(35,"p",29),i(36,"Investimentos ativos"),t()(),e(37,"div",32)(38,"div",24)(39,"div")(40,"p",25),i(41,"Valor Total"),t(),e(42,"p",34),i(43),_(44,"number"),t()(),e(45,"div",35)(46,"span",28),i(47,"\u{1F4B0}"),t()()(),e(48,"p",29),i(49,"Patrim\xF4nio sob gest\xE3o"),t()()(),e(50,"div",36)(51,"h3",37),i(52,"A\xE7\xF5es R\xE1pidas"),t(),e(53,"div",38)(54,"button",39)(55,"div",40),i(56,"\u2795"),t(),e(57,"p",41),i(58,"Novo Investidor"),t(),e(59,"p",42),i(60,"Cadastrar cliente"),t()(),e(61,"button",43)(62,"div",40),i(63,"\u{1F4C8}"),t(),e(64,"p",41),i(65,"Nova Carteira"),t(),e(66,"p",42),i(67,"Criar portfolio"),t()(),e(68,"button",39)(69,"div",40),i(70,"\u{1F4CB}"),t(),e(71,"p",41),i(72,"Ver Investidores"),t(),e(73,"p",42),i(74,"Gerenciar clientes"),t()()()()),n&2){let r=E();s(7),c(r.stats().investidores),s(12),c(r.stats().carteiras),s(12),c(r.stats().aplicacoes),s(12),C("R$ ",w(44,4,r.stats().valorTotal,"1.2-2"),"")}}var Z=(()=>{class n{constructor(r,o,a,l){this.authService=r,this.investidorService=o,this.portfolioService=a,this.aplicacaoService=l,this.userName=m(""),this.showLogoutModal=m(!1),this.loading=m(!0),this.stats=m({investidores:0,carteiras:0,aplicacoes:0,valorTotal:0})}ngOnInit(){let r=this.authService.currentUser();r&&this.userName.set(r.nome),this.carregarDashboard()}carregarDashboard(){this.loading.set(!0),g({investidores:this.investidorService.listarInvestidores(),carteiras:this.portfolioService.listarPortfolios(),aplicacoes:this.aplicacaoService.listarAplicacoes()}).subscribe({next:r=>{let o=r.investidores.data||[],a=r.carteiras.data||[],l=r.aplicacoes.data||[],x=a.reduce((P,v)=>{let f=v.valorTotal||0;return console.log(`Carteira ${v.nome}: R$ ${f}`),P+f},0);console.log(`Total de carteiras: ${a.length}, Valor total: R$ ${x}`),this.stats.set({investidores:o.length,carteiras:a.length,aplicacoes:l.length,valorTotal:x}),this.loading.set(!1)},error:r=>{console.error("Erro ao carregar dashboard:",r),this.loading.set(!1)}})}abrirModalLogout(){this.showLogoutModal.set(!0)}confirmarLogout(){this.showLogoutModal.set(!1),this.authService.logout()}cancelarLogout(){this.showLogoutModal.set(!1)}static{this.\u0275fac=function(o){return new(o||n)(d(k),d(A),d(B),d(F))}}static{this.\u0275cmp=h({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[D],decls:30,vars:9,consts:[[1,"min-h-screen","bg-gray-50","flex","flex-col"],[1,"bg-white","shadow-sm","border-b","border-gray-200"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","h-20"],[1,"flex","items-center"],["src","assets/logo.png","alt","BartoFinance","routerLink","/dashboard",1,"h-12","w-auto","hover:opacity-80","transition-opacity","cursor-pointer"],[1,"hidden","md:flex","items-center","space-x-8"],["routerLink","/dashboard",1,"text-gray-900","hover:text-primary-600","font-medium","transition"],["routerLink","/investidores",1,"text-gray-600","hover:text-primary-600","transition"],["routerLink","/carteiras",1,"text-gray-600","hover:text-primary-600","transition"],[1,"flex","items-center","space-x-4"],[1,"text-sm","text-gray-700"],[1,"font-semibold"],[1,"btn-ghost","text-sm",3,"click"],[1,"flex-1","max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8","w-full"],[1,"mb-8","animate-fade-in"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"flex","justify-center","items-center","py-12"],[3,"confirm","cancel","show","title","message","confirmText","cancelText","type","icon"],[1,"animate-spin","rounded-full","h-12","w-12","border-4","border-primary-500","border-t-transparent"],[1,"ml-4","text-primary-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],["routerLink","/investidores",1,"card","animate-slide-up","hover:scale-105","transition-transform","cursor-pointer"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-600","mb-1"],[1,"text-3xl","font-bold","text-gray-900"],[1,"w-12","h-12","bg-blue-100","rounded-full","flex","items-center","justify-center"],[1,"text-2xl"],[1,"text-xs","text-gray-500","mt-3"],["routerLink","/carteiras",1,"card","animate-slide-up","animation-delay-200","hover:scale-105","transition-transform","cursor-pointer"],[1,"w-12","h-12","bg-green-100","rounded-full","flex","items-center","justify-center"],["routerLink","/carteiras",1,"card","animate-slide-up","animation-delay-400","hover:scale-105","transition-transform","cursor-pointer"],[1,"w-12","h-12","bg-yellow-100","rounded-full","flex","items-center","justify-center"],[1,"text-2xl","font-bold","text-gray-900"],[1,"w-12","h-12","bg-purple-100","rounded-full","flex","items-center","justify-center"],[1,"card","animate-fade-in"],[1,"text-xl","font-bold","text-gray-900","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["routerLink","/investidores",1,"p-6","border-2","border-dashed","border-gray-300","rounded-lg","hover:border-primary-500","hover:bg-primary-50","transition-all","text-center","group"],[1,"text-4xl","mb-3"],[1,"font-medium","text-gray-900","group-hover:text-primary-600"],[1,"text-sm","text-gray-500","mt-1"],["routerLink","/carteiras",1,"p-6","border-2","border-dashed","border-gray-300","rounded-lg","hover:border-primary-500","hover:bg-primary-50","transition-all","text-center","group"]],template:function(o,a){o&1&&(e(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"div",4),p(5,"img",5),t(),e(6,"div",6)(7,"a",7),i(8," Dashboard "),t(),e(9,"a",8),i(10," Investidores "),t(),e(11,"a",9),i(12," Carteiras "),t()(),e(13,"div",10)(14,"span",11),i(15,"Ol\xE1, "),e(16,"span",12),i(17),t()(),e(18,"button",13),u("click",function(){return a.abrirModalLogout()}),i(19," Sair "),t()()()()(),e(20,"main",14)(21,"div",15)(22,"h2",16),i(23,"Bem-vindo de volta! \u{1F44B}"),t(),e(24,"p",17),i(25,"Aqui est\xE1 um resumo da sua carteira de clientes"),t()(),b(26,N,4,0,"div",18)(27,R,75,7),t(),p(28,"app-footer"),e(29,"app-confirm-modal",19),u("confirm",function(){return a.confirmarLogout()})("cancel",function(){return a.cancelarLogout()}),t()()),o&2&&(s(17),c(a.userName()),s(9),y(26,a.loading()?26:27),s(3),S("show",a.showLogoutModal())("title","Sair do Sistema")("message","Voc\xEA deseja realmente sair do sistema? Voc\xEA precisar\xE1 fazer login novamente para acessar.")("confirmText","Sair")("cancelText","Cancelar")("type","warning")("icon","\u{1F44B}"))},dependencies:[T,L,I,j,M],styles:["[_nghost-%COMP%]{display:block}"]})}}return n})();export{Z as DashboardComponent};
